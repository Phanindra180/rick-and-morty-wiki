{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.6a4428dbe16f064a8baf.hot-update.js","sources":["webpack:///./src/containers/CharacterList/index.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { gql } from 'apollo-boost';\r\nimport { Heading, SimpleGrid, Text } from '@chakra-ui/core';\r\n\r\nimport CharacterItem from '../../components/common/CharacterItem';\r\nimport Loader from '../../components/common/Loader';\r\nimport Filter from '../../components/layout/Filter';\r\nimport Pagination from '../../components/layout/Pagination';\r\n\r\nimport { GET_CHARACTER_LIST } from '../../lib/queries';\r\nimport { Error, Container } from './styles';\r\n\r\nconst CharacterList = () => {\r\n  const INITIAL_FILTER = {\r\n    name: null,\r\n    status: null,\r\n    species: null,\r\n    type: null,\r\n    gender: null\r\n  };\r\n\r\n  const [filter, setFilter] = useState({ ...INITIAL_FILTER });\r\n\r\n  const { loading, error, data, fetchMore } = useQuery(GET_CHARACTER_LIST(gql), {\r\n    variables: { page: 1, filter },\r\n    notifyOnNetworkStatusChange: true,\r\n    fetchPolicy: 'cache-first'\r\n  });\r\n\r\n  const characterData = data ? data['characters']['results'] : [];\r\n  const { pages, next, prev, count } = data ? data['characters']['info'] : {};\r\n\r\n  const onPrev = () => paginate(data, fetchMore, prev);\r\n  const onNext = () => paginate(data, fetchMore, next);\r\n\r\n  const renderContent = () => {\r\n    if (loading || !data) return <Loader />;\r\n\r\n    if (error)\r\n      return <Error error={error} message=\"Could not fetch Rick and Morty characters...\" />;\r\n\r\n    return (\r\n      <>\r\n        <Filter />\r\n        <Pagination prev={prev} next={next} onPrev={onPrev} onNext={onNext} pages={pages} />\r\n\r\n        <Text textAlign=\"center\" color=\"gray.400\" marginBottom=\"0px\" fontSize=\"14px\">\r\n          &bull; {count} characters &bull;\r\n        </Text>\r\n\r\n        <Text textAlign=\"center\" color=\"gray.400\" marginBottom=\"20px\" fontSize=\"12px\">\r\n          Showing {characterData.length}\r\n        </Text>\r\n\r\n        <SimpleGrid columns={{ md: 5, sm: 3, xs: 1 }} spacingX=\"30px\" spacingY=\"30px\">\r\n          {characterData.length === 0 ? (\r\n            <Error message=\"This search led to no results...\" />\r\n          ) : (\r\n            characterData.map(character => <CharacterItem key={character.id} {...character} />)\r\n          )}\r\n        </SimpleGrid>\r\n\r\n        <Pagination prev={prev} next={next} onPrev={onPrev} onNext={onNext} pages={pages} />\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Heading as=\"h1\" size=\"xl\">\r\n        Rick and Morty Characters:\r\n      </Heading>\r\n\r\n      {renderContent()}\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst paginate = (data, fetchMore, page) =>\r\n  fetchMore({\r\n    variables: {\r\n      page\r\n    },\r\n    updateQuery: (previousResult, { fetchMoreResult }) => {\r\n      if (!fetchMoreResult) return previousResult;\r\n\r\n      return fetchMoreResult;\r\n    }\r\n  });\r\n\r\nexport default CharacterList;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;AAMA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAEA;AACA;AADA;AAGA;AAAA;AAAA;AACA;AAEA;AACA;AARA;AACA;AAUA;;;;A","sourceRoot":""}